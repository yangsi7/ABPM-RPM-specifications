# Navigation Requirements v2 - ABPM Integration

## Current State Analysis

Based on Puppeteer analysis of portal.myanthealth.com:

### Top-Level Navigation
- **Current**: "Patients" | "Holter Studies"
- **Issue**: "Holter Studies" is too specific for a multi-device platform

### Patient List View
- Already displays blood pressure data (SBP, DBP columns)
- Shows both Holter and Afib reports
- Has "Create SCLA Account" action

### Missing Elements
- No patient detail view captured (navigation likely happens after patient click)
- No visibility into patient-level tabs
- No "Virtual Consultation" visible at top level

## User Goals & Intent

Based on the requirements:
1. **Remove complexity**: Eliminate virtual consultations feature
2. **Unify device management**: Support multiple study types (Holter, ABPM, future devices)
3. **Improve navigation logic**: Make it intuitive for clinicians managing multiple study types
4. **Leverage existing infrastructure**: ABPM data already partially integrated (BP columns visible)

## Proposed Navigation Structure

### Option A: Unified Studies Approach (Recommended)

#### Top-Level Navigation
```
Patients | Studies
```

#### Patient-Level Navigation
```
Summary | All Studies | ECG | ABPM | Reports
```

**Benefits**:
- Clean, scalable architecture
- "Studies" encompasses all device types
- Separate tabs for study-specific views
- Summary shows all active studies

**Implementation**:
1. Rename "Holter Studies" → "Studies"
2. Add sub-navigation or filtering within Studies
3. Patient detail view gets specific study tabs

### Option B: Device-Specific Top Navigation

#### Top-Level Navigation
```
Patients | Holter Studies | ABPM Studies | Weight Tracking
```

**Benefits**:
- Direct access from top level
- Clear separation by device type
- No sub-navigation needed

**Drawbacks**:
- Cluttered as more devices added
- Redundant "Studies" in each label
- Harder to see cross-device correlations

### Option C: Hybrid Approach

#### Top-Level Navigation
```
Patients | Clinical Studies
```

#### Studies Page Sub-Navigation
```
[All] [Holter] [ABPM] [Weight] [Glucose]
```

#### Patient-Level Tabs
```
Overview | Studies | ECG Data | BP Trends | Documents
```

**Benefits**:
- Clean top navigation
- Flexible filtering on studies page
- Patient view focuses on data types, not devices

## Detailed Requirements

### 1. Top-Level Changes
- **MUST**: Change "Holter Studies" to either "Studies" or "Clinical Studies"
- **MUST NOT**: Include "Virtual Consultation" anywhere
- **SHOULD**: Keep navigation minimal (2-3 items max)

### 2. Studies List Page
- **MUST**: Show all study types in unified list
- **MUST**: Include visual indicators for study type (icons)
- **SHOULD**: Provide filtering by study type
- **SHOULD**: Show study progress/status

### 3. Patient Detail View
Based on requirements and best practices:

#### Summary Tab
- **MUST**: Show all active studies
- **MUST**: Link to appropriate detail views
- **SHOULD**: Show key metrics from each active study
- **SHOULD**: Highlight any alerts/warnings

#### Study-Specific Tabs
Option 1: By Device
- "Holter" - ECG data and reports
- "ABPM" - BP trends via Sphygmo iframe
- "Weight" - Future tracking

Option 2: By Data Type (Recommended)
- "ECG" - Holter-specific ECG data
- "Blood Pressure" - ABPM data via Sphygmo
- "Vitals" - Other measurements

#### Key Decisions
- ECG tab should be Holter-specific (not general)
- ABPM gets dedicated tab with Sphygmo iframe
- Summary provides unified view across all studies

### 4. ABPM-Specific Requirements

#### ABPM Studies Tab Content
- Embedded Sphygmo iframe for detailed visualization
- Native MVCP header with study metadata
- Quick actions: End Study, Download Report, Settings

#### Integration Points
- Study creation initiated in MVCP
- Device pairing through SCLA app
- Data visualization through Sphygmo iframe
- Reports generated by Sphygmo, accessible in MVCP

## Navigation Flow Examples

### Flow 1: Clinician Reviews ABPM Study
1. Login → Patients list
2. Click patient → Patient detail view
3. Click "Blood Pressure" or "ABPM" tab
4. View Sphygmo visualization in iframe
5. Access reports through native MVCP UI

### Flow 2: Setting Up New ABPM Study  
1. Patients → Select patient
2. Patient detail → "Create Study" button
3. Select study type: ABPM
4. Configure duration and parameters
5. Study created in MVCP, synced to Sphygmo

### Flow 3: Cross-Study Correlation
1. Patient detail → Summary tab
2. See both active Holter and ABPM studies
3. View correlation insights
4. Navigate to specific study for details

## Success Metrics

1. **Reduced Clicks**: Maximum 3 clicks to any study data
2. **Clear Mental Model**: Study type immediately apparent
3. **Scalability**: Easy to add new device types
4. **Consistency**: Similar patterns across study types
5. **Performance**: Sub-2s load times for iframes

## Technical Considerations

1. **URL Structure**:
   - `/patients` - Patient list
   - `/patients/{id}` - Patient detail
   - `/patients/{id}/studies/{type}` - Specific study view
   
2. **State Management**:
   - Active tab state per patient
   - Study filters persist across sessions
   - Iframe state isolated from parent

3. **Responsive Design**:
   - Tabs collapse to dropdown on mobile
   - Iframe has minimum viable dimensions
   - Critical actions always visible

## Recommendation

**Adopt Option A (Unified Studies)** with Option 2 patient tabs (By Data Type):

- Top: "Patients | Studies"  
- Patient: "Summary | All Studies | ECG | Blood Pressure | Documents"

This provides the cleanest, most scalable approach while maintaining clarity for clinicians. The separation by data type (ECG vs Blood Pressure) rather than device (Holter vs ABPM) better supports future devices and cross-study insights.